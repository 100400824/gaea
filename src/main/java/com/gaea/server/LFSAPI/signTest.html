<!DOCTYPE html>
<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js"></script>
</head>
<body>

<script>
    function buildSign(data, privateKey) {
        // 按照key升序
        const ordered = {};
        Object.keys(data).sort().forEach(function (key) {
            switch (key) {
                case "timestamp":
                    ordered[key] = timestamp;
                    break;
                default:
                    ordered[key] = bodyRaw[key];
                    break;
            }
        });
        var beforeSign = "";
        for (let key in ordered) {
            if (key != "sign") {
                beforeSign += key + "=" + ordered[key] + "&"
            }
        }
        beforeSign += "key=" + privateKey;
        console.log("beforeSign:" + beforeSign);
        var sign = CryptoJS.MD5(beforeSign).toString();
        console.log("sign:" + sign);
        return sign;
    }

    //var key = "2d90bc1c110635cb8d80c84852f8c3f8"; // 线上
    var key = "c3d23ec5e3ee66e56a831012ec47d1a4";// 开发
    /*
    接口请求
    Request URL: https://api-test.iyingdi.com/web/bbs/hot-top
    Request Method: POST
    请求数据
    timestamp: 1626926169
    sign: 9ef20b1a52ea67a2fb8f0861348c99e4
    */
    // var bodyRaw = request.request_bodys;
    // var timestamp = request.request_bodys.timestamp;
    var bodyRaw = "{timestamp=1626926169}";
    var timestamp = "1626926169";
    alert("true:" + "9ef20b1a52ea67a2fb8f0861348c99e4" +"\nsign:" + buildSign(bodyRaw, key));
</script>

</body>
</html>